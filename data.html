<!DOCTYPE html>
<html lang="am">
<head>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-GW2Y1BE243"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-GW2Y1BE243');
  </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>рІерЅБрїЃрїЁ ріљрІ│рїЁ рѕўрѕерїЃ - рІІріЊрІЇ рїѕрїй</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Noto+Sans+Ethiopic:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <header class="main-header">
      <div class="ad-marquee-container">
        <p class="ad-marquee-text">
            Рюе ріарІ▓рѕх рЅБрїЃрїЁ рѕърІ┤рѕјрЅй рЅарЅЁрѕГрЅА рІГрѕўрїБрѕЅ! &nbsp; &nbsp; &nbsp; &nbsp;
            ­ЪњА рѕѕрЅхрѕФріЋрѕхрЇќрѕГрЅх ріарїѕрѕЇрїЇрѕјрЅх рЅБрїЃрїЁ рІГрЇѕрѕЇрїІрѕЅ? &nbsp; &nbsp; &nbsp; &nbsp;
            ­Ъњ░ рІеріљрІ│рїЁ рЅЁріЊрѕй рѕўрѕерїЃ рЅарЅЁрѕГрЅА рІГрЇІ рІГрѕєріЊрѕЇ! &nbsp; &nbsp; &nbsp; &nbsp;
            ­ЪЏа№ИЈ ріарІ▓рѕх рІерїЦрїѕріЊ рѕЮріГрѕ«рЅйріЋ рІГрѕўрѕЇріерЅ▒! &nbsp; &nbsp; &nbsp; &nbsp;
        </p>
      </div>

      <h1><span class="accent-text">рІерЅБрїЃрїЁ ріљрІ│рїЁ</span> рѕўрѕерїЃ</h1>
      <p>рІерЅхріърЅ╣ ріљрІ│рїЁ рѕЏрІ░рІФрІјрЅй ріљрІ│рїЁ ріЦріЋрІ│рѕІрЅИрІЇ ріЦріЊ рІерІѕрѕерЇІ рѕЂріћрЅ│рЅИрІЇріЋ рЅарЅђрѕІрѕЅ рІГрІѕрЅЂ!</p>
      <nav class="sub-nav">
          <a href="news.html">рІюріЊрІјрЅй</a>
          <a href="sales.html">рѕўрѕИрїФ</a>
          <a href="maintenance.html">ріЦріЋріГрЅЦріФрЅц</a>
      </nav>
      <header class="main-header">
    <nav class="sub-nav">
        </nav>
    
    <button id="logoutButton" class="logout-button">рІЇрїБ</button>
</header>
    </header>

    <main class="container">
        <section class="fuel-station-list">
            <div class="station-card">
                <h2 class="station-name">ріарЇЇрѕфріФ ріљрІ│рїЁ рѕЏрІ░рІФ (рЅдрѕї)</h2>
                <div class="status-info">
                    <p>ріљрІ│рїЁ ріарѕѕ?: <strong class="available">ріарѕѕ</strong></p>
                    <p>рІеріљрІ│рїЁ рІІрїІ: <strong>49.90 рЅЦрѕГ/рѕірЅхрѕГ</strong></p>
                    <p>рІерІѕрѕерЇІ рѕЂріћрЅ│: <strong class="status-short">ріарїГрѕГ (5-10 рІ░рЅѓрЅЃ)</strong></p>
                </div>
                <p class="last-updated">рІерѕўрїерѕерѕ╗ рІЮрѕўріЊ: 2025-06-03 10:30 рїЦрІІрЅх</p>
            </div>

            <div class="station-card">
                <h2 class="station-name">рідрІГрѕЇ рѕірЅбрІФ (рЇњрІФрѕ│)</h2>
                <div class="status-info">
                    <p>ріљрІ│рїЁ ріарѕѕ?: <strong class="unavailable">рІерѕѕрѕЮ</strong></p>
                    <p>рІеріљрІ│рїЁ рІІрїІ: <strong>---</strong></p>
                    <p>рІерІѕрѕерЇІ рѕЂріћрЅ│: <strong class="status-none">рѕўрѕерїЃ рІерѕѕрѕЮ</strong></p>
                </div>
                <p class="last-updated">рІерѕўрїерѕерѕ╗ рІЮрѕўріЊ: 2025-06-03 11:00 рїЦрІІрЅх</p>
            </div>

            <div class="station-card">
                <h2 class="station-name">рЅХрЅ│рѕЇ ріљрІ│рїЁ рѕЏрІ░рІФ (рѕўрїѕріЊріЏ)</h2>
                <div class="status-info">
                    <p>ріљрІ│рїЁ ріарѕѕ?: <strong class="available">ріарѕѕ</strong></p>
                    <p>рІеріљрІ│рїЁ рІІрїІ: <strong>49.90 рЅЦрѕГ/рѕірЅхрѕГ</strong></p>
                    <p>рІерІѕрѕерЇІ рѕЂріћрЅ│: <strong class="status-medium">рѕўріФріерѕѕріЏ (15-20 рІ░рЅѓрЅЃ)</strong></p>
                </div>
                <p class="last-updated">рІерѕўрїерѕерѕ╗ рІЮрѕўріЊ: 2025-06-03 10:45 рїЦрІІрЅх</p>
            </div>

            <div class="station-card">
                <h2 class="station-name">ріЊрѕйріЊрѕЇ рЅ│ріЋріГ (ріарІерѕГ рїцріЊ)</h2>
                <div class="status-info">
                    <p>ріљрІ│рїЁ ріарѕѕ?: <strong class="available">ріарѕѕ</strong></p>
                    <p>рІеріљрІ│рїЁ рІІрїІ: <strong>49.90 рЅЦрѕГ/рѕірЅхрѕГ</strong></p>
                    <p>рІерІѕрѕерЇІ рѕЂріћрЅ│: <strong class="status-long">рѕерїЁрѕЮ (30+ рІ░рЅѓрЅЃ)</strong></p>
                </div>
                <p class="last-updated">рІерѕўрїерѕерѕ╗ рІЮрѕўріЊ: 2025-06-03 10:55 рїЦрІІрЅх</p>
            </div>

            <div class="station-card">
                <h2 class="station-name">ріќріГ ріљрІ│рїЁ рѕЏрІ░рІФ (ріарѕФрЅх ріфрѕј)</h2>
                <div class="status-info">
                    <p>ріљрІ│рїЁ ріарѕѕ?: <strong class="available">ріарѕѕ</strong></p>
                    <p>рІеріљрІ│рїЁ рІІрїІ: <strong>49.90 рЅЦрѕГ/рѕірЅхрѕГ</strong></p>
                    <p>рІерІѕрѕерЇІ рѕЂріћрЅ│: <strong class="status-short">ріарїГрѕГ (5-10 рІ░рЅѓрЅЃ)</strong></p>
                </div>
                <p class="last-updated">рІерѕўрїерѕерѕ╗ рІЮрѕўріЊ: 2025-06-03 11:10 рїЦрІІрЅх</p>
            </div>

            <div class="station-card">
                <h2 class="station-name">рїІрІЮрѕ«ріЋ (рѕ▓ ріцрѕЮ рѕ▓)</h2>
                <div class="status-info">
                    <p>ріљрІ│рїЁ ріарѕѕ?: <strong class="unavailable">рІерѕѕрѕЮ</strong></p>
                    <p>рІеріљрІ│рїЁ рІІрїІ: <strong>---</strong></p>
                    <p>рІерІѕрѕерЇІ рѕЂріћрЅ│: <strong class="status-none">рѕўрѕерїЃ рІерѕѕрѕЮ</strong></p>
                </div>
                <p class="last-updated">рІерѕўрїерѕерѕ╗ рІЮрѕўріЊ: 2025-06-03 11:20 рїЦрІІрЅх</p>
            </div>
        </section>
         <div class="firestore-data-display">
                <p style="text-align: center; color: #b0b0b0;">рІерЇІрІерѕГрЅцрІЮ рѕўрѕерїЃ ріЦрІерЅ░рїФріљ ріљрІЇ...</p>
            </div>

        <section class="action-buttons">
            <a href="#" class="action-button">рІеріљрІ│рїЁ рѕЏрІ░рІФ рѕўрѕерїЃрІјрЅйріЋ ріарІўрѕЮріЋ</a>
            <a href="#" class="action-button">ріарІ▓рѕх ріљрІ│рїЁ рѕЏрІ░рІФ рїерѕЮрѕГ</a>
        </section>
    </main>

    <footer class="main-footer">
        <p>&copy; 2025 рІерЅБрїЃрїЁ ріљрІ│рїЁ рѕўрѕерїЃ. рѕЂрѕЅрѕЮ рѕўрЅЦрЅХрЅй рІерЅ░рїарЅарЅЂ ріЊрЅИрІЇрЇб</p>
        <p>рѕѕрІѕрЅЁрЅ│рІі рѕўрѕерїЃ рІхрѕе-рїѕрї╗рЅйріЋріЋ рІГрїјрЅЦріЎрЇб</p>
    </footer>
    <script type="module">
    // рїѕрї╣ рѕ▓рїФріЋ рІерѕўрїЇрЅбрІФ рѕЂріћрЅ│ріЋ рІФрѕерїІрїЇрїА
    document.addEventListener('DOMContentLoaded', () => {
        const isLoggedIn = localStorage.getItem('isLoggedIn');
        
        if (isLoggedIn !== 'true') {
            // ріФрѕЇрїѕрЅБ рІѕрІ░ рѕўрїЇрЅбрІФ рїѕрїй рІГрѕўрѕЇрѕх
            alert("рѕѕрѕўрїЇрЅБрЅх рЇЇрЅЃрІх рІерѕѕрІјрЅхрѕЮрЇб ріЦрЅБріГрІј рІГрїЇрЅАрЇб");
            window.location.href = "login.html";
            return; // ріерІџрѕЁ рЅаріІрѕІ рІФрѕѕрІЇріЋ рі«рІх ріЦріЋрІ│рІГрѕ░рѕФ
        }
        
        // Firebase ріЦріЊ Firestore рѕЏрѕхрїђрѕўрѕфрІФ рі«рІх
        // рІерѕџрІФрѕхрЇѕрѕЇрїЅрѕЁріЋ рЅ░рїЇрЅБрѕФрЅх (functions) ріе Firebase SDKs ріарѕхрѕўрїБ
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js";
        // Analytics рІерѕЮрЅхрїарЅђрѕЮ ріерѕєріљ рІГрѕЁріЋ ріарѕхрїђрѕЮрѕГ - ріарѕЂріЋ рЅБрЅхрїарЅђрѕЮрѕЮ рЅйрїЇрѕГ рІерѕѕрІЇрѕЮ
        // import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-analytics.js"; 
        import { getFirestore, doc, getDoc, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore.js";

        // рІерЇІрІерѕГрЅцрІЮ configuration рІЮрѕГрІЮрѕ«рЅйрѕЁ
        const firebaseConfig = {
            apiKey: "AIzaSyA-ywRuhanxoEJgR83jwp_-nOkPY4jLOH4",
            authDomain: "elanyas-info.firebaseapp.com",
            projectId: "elanyas-info",
            storageBucket: "elanyas-info.firebasestorage.app",
            messagingSenderId: "769306910360",
            appId: "1:769306910360:web:70988eed5b1da8ffa0faed",
            measurementId: "G-2XX2B3RSGP"
        };

        // FirebaseріЋ ріарѕхрїђрѕЮрѕГ
        const app = initializeApp(firebaseConfig);
        // const analytics = getAnalytics(app); // Analytics рІерѕЮрЅхрїарЅђрѕЮ ріерѕєріљ ріарѕхрїђрѕЮрѕГ

        // FirestoreріЋ ріарѕхрїђрѕЮрѕГ
        const db = getFirestore(app);

        // рІерѕўрІЇрїФ (Logout) рЅЂрѕЇрЇЇ рЅ░рїЇрЅБрѕГ
        const logoutButton = document.getElementById('logoutButton'); // рЅа<body> рІЇрѕхрїЦ рІерїерѕўрѕГріерІЇ ріарІЮрѕФрѕГ ID 'logoutButton' рѕўрѕєріЉріЋ ріарѕерїІрїЇрїЦ
        logoutButton.addEventListener('click', () => {
            localStorage.removeItem('isLoggedIn'); // рІерѕўрїЇрЅбрІФ рѕЮрѕЇріГрЅ▒ріЋ ріарѕхрІѕрїЇрІх
            alert("рЅарЅ░рѕ│ріФ рѕЂріћрЅ│ рІѕрїЦрЅ░рІІрѕЇ!");
            window.location.href = "login.html"; // рІѕрІ░ рѕўрїЇрЅбрІФ рїѕрїй рЅ░рѕўрѕѕрѕх
        });

        // рѕўрѕерїЃрІЇріЋ ріе Firestore рѕѕрѕЏрѕЮрїБрЅх
        async function fetchFuelStations() {
            // Firestore рѕўрѕерїЃрІЇ рІерѕџрїѕрЅБрЅарЅхріЋ div рЅ│рїЇ ріарѕЂріЋ рЅа"firestore-data-display" class рѕѕрІГрЅ░ріЊрѕЇ
            const dataDisplayDiv = document.querySelector('.firestore-data-display');
            // рІеріљрІ│рїЁ рѕЏрІ░рІФ рІЮрѕГрІЮрѕ«рЅйріЋ рІерѕџрІФрѕ│рІГ ріГрЇЇрѕЇрѕЮ ріарїйрІ│ (рѕхрЅ│рЅ▓ріГ рѕўрѕерїЃрІјрЅйріЋ рѕѕрѕЏрѕхрІѕрїѕрІх)
            const fuelStationListSection = document.querySelector('.fuel-station-list');
            fuelStationListSection.innerHTML = ''; // рІФрѕЅрЅхріЋ рѕхрЅ│рЅ▓ріГ рѕўрѕерїЃрІјрЅй ріарїЦрЇІ

            dataDisplayDiv.innerHTML = '<p style="text-align: center; color: #b0b0b0;">рІеріљрІ│рїЁ рѕЏрІ░рІФ рѕўрѕерїЃ ріЦрІерЅ░рїФріљ ріљрІЇ...</p>';

            try {
                // !!! ріЦрІџрѕЁ рѕІрІГ рІе collection рѕхрѕЮрѕЁріЋ ріарѕерїІрїЇрїЦ/рЅђрІГрѕГ !!!
                // рѕѕрѕЮрѕ│рѕїрЇБ рІеріљрІ│рїЁ рѕЏрІ░рІФ рѕўрѕерїЃрІјрЅйрѕЁ рЅа "fuelStations" collection рІЇрѕхрїЦ ріерѕєріЉ:
                const fuelStationsCollectionRef = collection(db, "fuelStations"); 
                // !!! рІеріаріЋрЅ░ рѕўрѕерїЃ рЅа'users' collection рІЇрѕхрїЦ 'card 1' рЅарѕџрѕЇ document рЅЦрЅ╗ ріерѕєріљ рїЇріЋ:
                // const docRef = doc(db, "users", "card 1");
                // const docSnap = await getDoc(docRef);
                // ріЦріЊ ріерЅ│рЅй рІФрѕѕрІЇріЋ loop ріарѕхрІѕрїЇрІ░рѕЁ ріаріЋрІх document рЅЦрЅ╗ ріарѕ│рІГ

                const querySnapshot = await getDocs(fuelStationsCollectionRef); // рІГрѕЁ рѕЂрѕЅріЋрѕЮ document рІФрѕўрїБрѕЇ

                if (querySnapshot.empty) {
                    dataDisplayDiv.innerHTML = '<p style="text-align: center; color: #b0b0b0;">рѕЮріЋрѕЮ рІеріљрІ│рїЁ рѕЏрІ░рІФ рѕўрѕерїЃ ріарѕЇрЅ░рїѕріўрѕЮрЇб</p>';
                    return;
                }

                dataDisplayDiv.innerHTML = ''; // рІе"loading" рѕўрѕЇріЦріГрЅ▒ріЋ ріарїЦрЇІ

                // рѕѕріЦрІФріЋрІ│ріЋрІ▒ document (рѕѕріЦрІФріЋрІ│ріЋрІ▒ рІеріљрІ│рїЁ рѕЏрІ░рІФ) ріФрѕГрІх рЇЇрїарѕГ
                querySnapshot.forEach((doc) => {
                    const station = doc.data();

                    // рІе 'available' field Boolean рѕўрѕєріЉріЋ ріарѕерїІрїЇрїЦ
                    const isAvailable = typeof station.available === 'boolean' ? station.available : (station.available === 'ріарѕѕ' || station.available === true);
                    const statusClass = isAvailable ? 'available' : 'unavailable';
                    const availabilityText = isAvailable ? 'ріарѕѕ' : 'рІерѕѕрѕЮ';

                    // рІе 'queue' field рІІрїІрІјрЅйріЋ ріарЅђріЊрЅЦрѕГ
                    const queueValue = station.queue || 'рѕўрѕерїЃ рІерѕѕрѕЮ';
                    const queueClass = queueValue === 'ріарїГрѕГ' ? 'status-short' :
                                       queueValue === 'рѕўріФріерѕѕріЏ' ? 'status-medium' :
                                       queueValue === 'рѕерїЁрѕЮ' ? 'status-long' :
                                       'status-none';

                    // рІе 'price' field
                    const priceText = (station.price !== undefined && station.price !== null && station.price !== '---') ? `${station.price} рЅЦрѕГ/рѕірЅхрѕГ` : '---';

                    // рІе 'lastUpdated' field
                    const lastUpdatedText = station.lastUpdated || 'рІерѕўрїерѕерѕ╗ рІЮрѕўріЊ рІерѕѕрѕЮ';

                    const stationCardHtml = `
                        <div class="station-card">
                            <h2 class="station-name">${station.name || 'рѕхрѕЮ рІерѕѕрѕЮ'}</h2>
                            <div class="status-info">
                                <p>ріљрІ│рїЁ ріарѕѕ?: <strong class="${statusClass}">${availabilityText}</strong></p>
                                <p>рІеріљрІ│рїЁ рІІрїІ: <strong>${priceText}</strong></p>
                                <p>рІерІѕрѕерЇІ рѕЂріћрЅ│: <strong class="${queueClass}">${queueValue}</strong></p>
                            </div>
                            <p class="last-updated">рІерѕўрїерѕерѕ╗ рІЮрѕўріЊ: ${lastUpdatedText}</p>
                        </div>
                    `;
                    fuelStationListSection.innerHTML += stationCardHtml;
                });
            } catch (error) {
                console.error("Error fetching fuel station data:", error);
                dataDisplayDiv.innerHTML = '<p style="text-align: center; color: #ff6347;">рІеріљрІ│рїЁ рѕЏрІ░рІФ рѕўрѕерїЃрІјрЅйріЋ рЅарѕўрїФріЋ рѕІрІГ рѕхрѕЁрЅ░рЅх рЅ░рЇѕрїарѕерЇб</p>';
            }
        }

        // рІеріљрІ│рїЁ рѕЏрІ░рІФ рѕўрѕерїЃрІјрЅйріЋ рїѕрї╣ рѕ▓рїФріЋ ріарѕЮрїБ
        fetchFuelStations();
    });
</script>
</body>
</html>